<!--[form:species_list]-->
<% @checklist ||= [] %>

<div class="row">
  <% if @checklist.any? %>
    <div class="col-xs-4 form-inline">
      <span class="nowrap"><%= :form_species_lists_species_to_add.t %>:</span><br/>
      <% i = 0
      for (name, id) in @checklist.sort_by(&:first) %>
        <%= check_box(:checklist_data, id, checked: @checklist_names[id], class: "form-control") %>
        <%= label_tag("checklist_data_#{id}", name.t) %>
        <br/>
      <% end %>
    </div>
  <% end %>

  <div class="col-xs-<%= @checklist.any? ? 8 : 12 %> form-inline">
    <%= render(partial: "shared/form_list_feedback") %>

    <div class="form-group push-down">
      <%= label_tag(:list_members, :form_species_lists_write_in_species.t) %><br/>
      <%= text_area(:list, :members, value: @list_members, rows: 20, cols: 80, autofocus: true, class: "form-control") %>
      <% turn_into_name_auto_completer(:list_members, primer: Name.primer, token: "\n") %>
    </div><br/>

    <div class="form-group push-down">
      <%= label_tag(:species_list_title, :form_species_lists_title.t) %>: (<%= :required.t %>)<br/>
      <%= text_field(:species_list, :title, size: 60, class: "form-control") %>
    </div><br/>

    <div class="form-group push-down">
      <%= label_tag(:species_list_notes, :form_species_lists_list_notes.t) %>:<br/>
      <%= text_area(:species_list, :notes, rows: 6, cols: 80, class: "form-control") %>
    </div><br/>
    <%= render(partial: "shared/textilize_help") %>

    <hr/>

    <div class="form-group">
      <%= label_tag(:species_list_when, :WHEN.t) %>:<br/>
      <%= date_select(:species_list, :when, start_year: 1980, end_year: Time.now.year,
                      order: [:day,:month,:year], class: "form-control") %>
    </div><br/>

    <% if @dubious_where_reasons and (@dubious_where_reasons != []) %>
      <div class="alert alert-warning">
        <%= @dubious_where_reasons.safe_join(safe_br) %><br/>
        <span class="HelpNote">
          <%= :form_observations_dubious_help.t(button: button_name) %>
        </span><br/>
      </div><br/>
    <% end %>

    <div class="form-group push-down">
      <%= label_tag(:species_list_place_name, :WHERE.t) %>: (<%= :required.t %>)<br/>
      <%= text_field(:species_list, :place_name, size: 60, class: "form-control") %>
    </div><br/>
    <% turn_into_location_auto_completer(:species_list_place_name) %>

    <div class="form-group push-down">
      <%= label_tag(:vote_value, :form_species_lists_confidence.t) %>:
      <%= select(:member, :value, Vote.confidence_menu, class: "form-control") %>
    </div><br/>

    <div class="form-group push-down">
      <%= label_tag(:member_notes, :form_species_lists_member_notes.t) %>:<br/>
      <%= text_area(:member, :notes, value: @member_notes, rows: 3, cols: 80, class: "form-control") %>
    </div><br/>

    <div class="form-group push-down">
      <%= label_tag(:member_lat, :LATITUDE.t) %>:&nbsp;<%=
        text_field(:member, :lat, size: 12, value: @member_lat, class: "form-control") %>
      <%= label_tag(:member_long, :LONGITUDE.t) %>:&nbsp;<%=
        text_field(:member, :long, size: 12, value: @member_long, class: "form-control") %>
      <%= label_tag(:member_alt, :ALTITUDE.t) %>:&nbsp;<%=
        text_field(:member, :alt, size: 12, value: @member_alt, class: "form-control") %><br/>
      <span class="HelpNote"><%= :form_observations_lat_long_help.t %></span>
    </div><br/>

    <div class="form-group push-down">
      <%= check_box(:member, :is_collection_location, checked: @member_is_collection_location, class: "form-control") %>
        <%= label_tag(:member_is_collection_location, :form_observations_is_collection_location.t) %><br/>
      <span class="HelpNote"><%= :form_observations_is_collection_location_help.t %></span>
    </div><br/>

    <div class="form-group push-down">
      <%= check_box(:member, :specimen, checked: @member_specimen, class: "form-control") %>
        <%= label_tag(:observation_specimen, :form_observations_specimen_available.t) %><br/>
      <span class="HelpNote"><%= :form_observations_specimen_available_help.t %></span>
    </div><br/>

    <hr/>

    <% if @projects.any? %>
      <div class="form-group">
        <b><%= :PROJECTS.t %></b>: <span class="HelpNote"><%= :form_species_lists_project_help.t %></span><br/>
        <% for project in @projects %>
          <%= check_box(:project, "id_#{project.id}", checked: @project_checks[project.id],
                        disabled: @species_list.user != @user && !project.is_member?(@user),
                        class: "form-control") %>
          <%= label_tag("project_id_#{project.id}", project_link(project)) %><br/>
        <% end %>
      </div><br/>
    <% end %>
  </div>
</div>

<!--[eoform:species_list]-->
